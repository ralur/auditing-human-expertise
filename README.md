# auditing-human-experts

This repository contains code to replicate the experiments in our paper "Auditing for Human Expertise" (https://arxiv.org/abs/2306.01646). Please reach out to Rohan Alur (ralur@mit.edu) with any questions or concerns.

The entry points to replicate the case study of gastrointestinal hospitalization decisions (Section 5) are available in gbs_accuracy_experiment.R and gbs_expertise_experiment.R. These can be run interactively, and assume the working directory is set to the './code/' folder. Additional helper methods are in gbs_experiment_helpers.R.

The entry point to replicate the numerical simulations (Appendix F) is synthetic_experiments.R. This can also be run interactively, and assumes the working directory is set to the './code/' folder.

Outputs are written to ./tables and ./figures. Inputs and intermediate results produced by the experiments are saved to the ./data folder.
Note that only one of the three main input files is available in the public Github repository, which means that Tables 2 and 4 can only be replicated from the intermediate results in the ./data/ archive (see below). The remaining input files, which contain a richer set of confidential patient data, were made available to reviewers. We will do our best to accommodate individual requests for these files (each request is subject to IRB approval).

 The full analysis of the case study in Section 5 takes a few minutes on a standard personal laptop; re-running the synthetic experiments in Appendix F can take up to one hour. Qualitatively similar results for the synthetic experiments can be obtained more quickly by reducing the number of iterations (the 'reps' argument in synthetic_experiments.R) for each simulation to 10. Subsequent invocations of each script will attempt to load the analysis (and synthetic data, if applicable) produced by a prior run and simply regenerate figures and tables, which takes only a few seconds. All simulated data and other outputs can be regenerated by disabling the 'use.saved.data' flag at the top of synthetic_experiments.R, gbs_expertise_experiment.R or gbs_accuracy_experiment.R.

ExpertTest is implemented in logic.R. Additional helper methods are in helpers.R. The script which we used to produce the input data for the case study of hospitalization decisions is in clean_gib_data.R.

Our code depends on the following packages: 

library(tidyverse)
library(data.table)
library(ggplot2)
library(glue)
library(Rfast) # provides an efficient implementation of the NxN pairwise distance calculations
